{"remainingRequest":"/home/huyu0408/FM/vue-musicplayer/node_modules/babel-loader/lib/index.js!/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/huyu0408/FM/vue-musicplayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/huyu0408/FM/vue-musicplayer/src/views/MyMain.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/huyu0408/FM/vue-musicplayer/src/views/MyMain.vue","mtime":1735395937483},{"path":"/home/huyu0408/FM/vue-musicplayer/babel.config.js","mtime":1734934208433},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js","mtime":1734925316076},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/babel-loader/lib/index.js","mtime":1734925316099},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js","mtime":1734925316076},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/vue-loader/lib/index.js","mtime":1734925323578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyB1cGxvYWRGaWxlcyB9IGZyb20gJy4uL3V0aWxzJzsKaW1wb3J0IHsgdXBsb2FkVHh0RmlsZSwgZG93bmxvYWRNcDNGaWxlIH0gZnJvbSAnLi4vYXBpL211c2ljQXBpLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnaW5kZXgnLCAnbG9jYWxTb25ncycsICdwbGF5aW5nU29uZ3MnLCAncGxheWVkU29uZ3MnXSksCiAgICBzb25ncygpIHsKICAgICAgc3dpdGNoICh0aGlzLiRyb3V0ZS5wYXRoKSB7CiAgICAgICAgY2FzZSAnL3BsYXlpbmdtdXNpYyc6CiAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5aW5nU29uZ3M7CiAgICAgICAgY2FzZSAnL3BsYXllZG11c2ljJzoKICAgICAgICAgIHJldHVybiB0aGlzLnBsYXllZFNvbmdzOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFNvbmdzOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsnaGFuZGxlUGxheScsICdoYW5kbGVDbGlja1NvbmcnLCAnaGFuZGxlVXBsb2FkJ10pLAogICAgcGxheShfLCByb3cpIHsKICAgICAgY29uc29sZS5sb2coewogICAgICAgIGluZGV4OiB0aGlzLmluZGV4LAogICAgICAgIGF1ZGlvOiByb3cuYXVkaW8sCiAgICAgICAgbmFtZTogcm93Lm5hbWUKICAgICAgfSk7CiAgICAgIHRoaXMuaGFuZGxlQ2xpY2tTb25nKHsKICAgICAgICBpbmRleDogdGhpcy5pbmRleCwKICAgICAgICBhdWRpbzogcm93LmF1ZGlvLAogICAgICAgIG5hbWU6IHJvdy5uYW1lCiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHVwbG9hZCgpIHsKICAgICAgdGhpcy4kbWVzc2FnZSgn5Yqg6L295Lit77yM6K+3562J5YCZLi4uJyk7CiAgICAgIHRoaXMuaGFuZGxlVXBsb2FkKGF3YWl0IHVwbG9hZEZpbGVzKCkpOwogICAgfSwKICAgIHNlbGVjdFR4dEZpbGUoKSB7CiAgICAgIC8vIOinpuWPkWlucHV055qE54K55Ye75LqL5Lu2CiAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgaW5wdXQudHlwZSA9ICdmaWxlJzsKICAgICAgaW5wdXQuYWNjZXB0ID0gJy50eHQnOwogICAgICBpbnB1dC5vbmNoYW5nZSA9IHRoaXMuaGFuZGxlVHh0RmlsZUNoYW5nZTsKICAgICAgaW5wdXQuY2xpY2soKTsKICAgIH0sCiAgICBhc3luYyBoYW5kbGVUeHRGaWxlQ2hhbmdlKGV2ZW50KSB7CiAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIGlmIChmaWxlICYmIGZpbGUudHlwZSA9PT0gJ3RleHQvcGxhaW4nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+S4iuS8oOS4rS4uLicpOwogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGxvYWRUeHRGaWxlKGZpbGUpOwogICAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOaIkOWKnycsIHJlc3BvbnNlKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnVFhU5paH5Lu25LiK5Lyg5oiQ5Yqf77yBJyk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+S4iuS8oOWksei0pScsIGVycm9yKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOS4iuS8oOWksei0pe+8miR7ZXJyb3IubWVzc2FnZSB8fCBlcnJvcn1gKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35LiK5LygVFhU5paH5Lu2Jyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDosIPnlKggQVBJIOS4reeahCBkb3dubG9hZE1wM0ZpbGUg5pa55rOVCiAgICBhc3luYyBkb3dubG9hZE1wMygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgZG93bmxvYWRNcDNGaWxlKCk7IC8vIOiwg+eUqCBBUEkg5pa55rOVCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKG1lc3NhZ2UpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IubWVzc2FnZSB8fCAn5LiL6L295aSx6LSlJyk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["mapGetters","mapActions","uploadFiles","uploadTxtFile","downloadMp3File","computed","songs","$route","path","playingSongs","playedSongs","localSongs","methods","play","_","row","console","log","index","audio","name","handleClickSong","upload","$message","handleUpload","selectTxtFile","input","document","createElement","type","accept","onchange","handleTxtFileChange","click","event","file","target","files","response","success","error","message","downloadMp3"],"sources":["src/views/MyMain.vue"],"sourcesContent":["<template>\r\n    <el-table :data=\"songs\" height=\"70vh\" style=\"width: 100%\">\r\n        <el-table-column label=\"名称\" prop=\"name\"></el-table-column>\r\n        <el-table-column label=\"时长\" prop=\"duration\"></el-table-column>\r\n        <!-- 操作列：导入、播放按钮 -->\r\n        <el-table-column align=\"right\">\r\n            <!-- 表头的导入本地按钮 -->\r\n            <template slot=\"header\" slot-scope=\"scope\">\r\n                <el-button type=\"primary\" @click=\"upload\" style=\"width: 200px;\">导入本地</el-button>\r\n                <!-- 上传TXT文件按钮 -->\r\n                <el-button type=\"success\" @click=\"selectTxtFile\" style=\"width: 200px;\">上传文本文件</el-button>\r\n                <el-button type=\"danger\" @click=\"downloadMp3\" style=\"width: 200px;\">下载 MP3 文件</el-button>\r\n            </template>\r\n            <!-- 每一行的播放按钮 -->\r\n            <template slot-scope=\"scope\">\r\n                <el-button size=\"mini\" icon=\"el-icon-video-play\" @click=\"play(scope.$index, scope.row)\"></el-button>\r\n            </template>\r\n        </el-table-column>\r\n    </el-table>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { uploadFiles } from '../utils'\r\nimport { uploadTxtFile, downloadMp3File } from '../api/musicApi.js'\r\nexport default {\r\n    computed: {\r\n        ...mapGetters(['index', 'localSongs', 'playingSongs', 'playedSongs']),\r\n        songs() {\r\n            switch (this.$route.path) {\r\n                case '/playingmusic':\r\n                    return this.playingSongs\r\n                case '/playedmusic':\r\n                    return this.playedSongs\r\n                default:\r\n                    return this.localSongs\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['handlePlay', 'handleClickSong', 'handleUpload']),\r\n        play(_, row) {\r\n            console.log({ index: this.index, audio: row.audio, name: row.name })\r\n            this.handleClickSong({ index: this.index, audio: row.audio, name: row.name })\r\n        },\r\n        async upload() {\r\n            this.$message('加载中，请等候...')\r\n            this.handleUpload(await uploadFiles())\r\n        },\r\n        selectTxtFile() {\r\n            // 触发input的点击事件\r\n            const input = document.createElement('input')\r\n            input.type = 'file'\r\n            input.accept = '.txt'\r\n            input.onchange = this.handleTxtFileChange\r\n            input.click()\r\n        },\r\n        async handleTxtFileChange(event) {\r\n            const file = event.target.files[0]\r\n            if (file && file.type === 'text/plain') {\r\n                try {\r\n                    this.$message('上传中...')\r\n                    const response = await uploadTxtFile(file)\r\n                    console.log('上传成功', response)\r\n                    this.$message.success('TXT文件上传成功！')\r\n                } catch (error) {\r\n                    console.error('上传失败', error)\r\n                    this.$message.error(`上传失败：${error.message || error}`)\r\n                }\r\n            } else {\r\n                this.$message.error('请上传TXT文件')\r\n            }\r\n        },\r\n        // 调用 API 中的 downloadMp3File 方法\r\n        async downloadMp3() {\r\n            try {\r\n                const message = await downloadMp3File(); // 调用 API 方法\r\n                this.$message.success(message);\r\n            } catch (error) {\r\n                this.$message.error(error.message || '下载失败');\r\n            }\r\n        },\r\n\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.my-main {\r\n    width: 100%;\r\n}\r\n</style>"],"mappings":"AAqBA,SAAAA,UAAA,EAAAC,UAAA;AACA,SAAAC,WAAA;AACA,SAAAC,aAAA,EAAAC,eAAA;AACA;EACAC,QAAA;IACA,GAAAL,UAAA;IACAM,MAAA;MACA,aAAAC,MAAA,CAAAC,IAAA;QACA;UACA,YAAAC,YAAA;QACA;UACA,YAAAC,WAAA;QACA;UACA,YAAAC,UAAA;MACA;IACA;EACA;EACAC,OAAA;IACA,GAAAX,UAAA;IACAY,KAAAC,CAAA,EAAAC,GAAA;MACAC,OAAA,CAAAC,GAAA;QAAAC,KAAA,OAAAA,KAAA;QAAAC,KAAA,EAAAJ,GAAA,CAAAI,KAAA;QAAAC,IAAA,EAAAL,GAAA,CAAAK;MAAA;MACA,KAAAC,eAAA;QAAAH,KAAA,OAAAA,KAAA;QAAAC,KAAA,EAAAJ,GAAA,CAAAI,KAAA;QAAAC,IAAA,EAAAL,GAAA,CAAAK;MAAA;IACA;IACA,MAAAE,OAAA;MACA,KAAAC,QAAA;MACA,KAAAC,YAAA,OAAAtB,WAAA;IACA;IACAuB,cAAA;MACA;MACA,MAAAC,KAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,KAAA,CAAAG,IAAA;MACAH,KAAA,CAAAI,MAAA;MACAJ,KAAA,CAAAK,QAAA,QAAAC,mBAAA;MACAN,KAAA,CAAAO,KAAA;IACA;IACA,MAAAD,oBAAAE,KAAA;MACA,MAAAC,IAAA,GAAAD,KAAA,CAAAE,MAAA,CAAAC,KAAA;MACA,IAAAF,IAAA,IAAAA,IAAA,CAAAN,IAAA;QACA;UACA,KAAAN,QAAA;UACA,MAAAe,QAAA,SAAAnC,aAAA,CAAAgC,IAAA;UACAnB,OAAA,CAAAC,GAAA,SAAAqB,QAAA;UACA,KAAAf,QAAA,CAAAgB,OAAA;QACA,SAAAC,KAAA;UACAxB,OAAA,CAAAwB,KAAA,SAAAA,KAAA;UACA,KAAAjB,QAAA,CAAAiB,KAAA,SAAAA,KAAA,CAAAC,OAAA,IAAAD,KAAA;QACA;MACA;QACA,KAAAjB,QAAA,CAAAiB,KAAA;MACA;IACA;IACA;IACA,MAAAE,YAAA;MACA;QACA,MAAAD,OAAA,SAAArC,eAAA;QACA,KAAAmB,QAAA,CAAAgB,OAAA,CAAAE,OAAA;MACA,SAAAD,KAAA;QACA,KAAAjB,QAAA,CAAAiB,KAAA,CAAAA,KAAA,CAAAC,OAAA;MACA;IACA;EAEA;AACA","ignoreList":[]}]}