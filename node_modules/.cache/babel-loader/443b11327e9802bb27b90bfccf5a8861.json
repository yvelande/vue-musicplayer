{"remainingRequest":"/home/huyu0408/FM/vue-musicplayer/node_modules/babel-loader/lib/index.js!/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/huyu0408/FM/vue-musicplayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/huyu0408/FM/vue-musicplayer/src/views/MyMain.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/huyu0408/FM/vue-musicplayer/src/views/MyMain.vue","mtime":1735301836997},{"path":"/home/huyu0408/FM/vue-musicplayer/babel.config.js","mtime":1734934208433},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js","mtime":1734925316076},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/babel-loader/lib/index.js","mtime":1734925316099},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js","mtime":1734925316076},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/vue-loader/lib/index.js","mtime":1734925323578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyB1cGxvYWRGaWxlcyB9IGZyb20gJy4uL3V0aWxzJzsKaW1wb3J0IHsgdXBsb2FkVHh0RmlsZSB9IGZyb20gJy4uL2FwaS9tdXNpY0FwaS5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2luZGV4JywgJ2xvY2FsU29uZ3MnLCAncGxheWluZ1NvbmdzJywgJ3BsYXllZFNvbmdzJ10pLAogICAgc29uZ3MoKSB7CiAgICAgIHN3aXRjaCAodGhpcy4kcm91dGUucGF0aCkgewogICAgICAgIGNhc2UgJy9wbGF5aW5nbXVzaWMnOgogICAgICAgICAgcmV0dXJuIHRoaXMucGxheWluZ1NvbmdzOwogICAgICAgIGNhc2UgJy9wbGF5ZWRtdXNpYyc6CiAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZWRTb25nczsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxTb25nczsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbJ2hhbmRsZVBsYXknLCAnaGFuZGxlQ2xpY2tTb25nJywgJ2hhbmRsZVVwbG9hZCddKSwKICAgIHBsYXkoXywgcm93KSB7CiAgICAgIGNvbnNvbGUubG9nKHsKICAgICAgICBpbmRleDogdGhpcy5pbmRleCwKICAgICAgICBhdWRpbzogcm93LmF1ZGlvLAogICAgICAgIG5hbWU6IHJvdy5uYW1lCiAgICAgIH0pOwogICAgICB0aGlzLmhhbmRsZUNsaWNrU29uZyh7CiAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsCiAgICAgICAgYXVkaW86IHJvdy5hdWRpbywKICAgICAgICBuYW1lOiByb3cubmFtZQogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyB1cGxvYWQoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoJ+WKoOi9veS4re+8jOivt+etieWAmS4uLicpOwogICAgICB0aGlzLmhhbmRsZVVwbG9hZChhd2FpdCB1cGxvYWRGaWxlcygpKTsKICAgIH0sCiAgICBzZWxlY3RUeHRGaWxlKCkgewogICAgICAvLyDop6blj5FpbnB1dOeahOeCueWHu+S6i+S7tgogICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgIGlucHV0LnR5cGUgPSAnZmlsZSc7CiAgICAgIGlucHV0LmFjY2VwdCA9ICcudHh0JzsKICAgICAgaW5wdXQub25jaGFuZ2UgPSB0aGlzLmhhbmRsZVR4dEZpbGVDaGFuZ2U7CiAgICAgIGlucHV0LmNsaWNrKCk7CiAgICB9LAogICAgLy8g5aSE55CGVFhU5paH5Lu25LiK5LygCiAgICBhc3luYyBoYW5kbGVUeHRGaWxlQ2hhbmdlKGV2ZW50KSB7CiAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIGlmIChmaWxlICYmIGZpbGUudHlwZSA9PT0gJ3RleHQvcGxhaW4nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+S4iuS8oOS4rS4uLicpOwogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGxvYWRUeHRGaWxlKGZpbGUpOwogICAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOaIkOWKnycsIHJlc3BvbnNlKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnVFhU5paH5Lu25LiK5Lyg5oiQ5Yqf77yBJyk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWksei0pScpOwogICAgICAgICAgY29uc29sZS5lcnJvcign5LiK5Lyg5aSx6LSlJywgZXJyb3IpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fkuIrkvKBUWFTmlofku7YnKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["mapGetters","mapActions","uploadFiles","uploadTxtFile","computed","songs","$route","path","playingSongs","playedSongs","localSongs","methods","play","_","row","console","log","index","audio","name","handleClickSong","upload","$message","handleUpload","selectTxtFile","input","document","createElement","type","accept","onchange","handleTxtFileChange","click","event","file","target","files","response","success","error"],"sources":["src/views/MyMain.vue"],"sourcesContent":["<template>\r\n    <el-table :data=\"songs\" height=\"70vh\" style=\"width: 100%\">\r\n        <el-table-column label=\"名称\" prop=\"name\"></el-table-column>\r\n        <el-table-column label=\"时长\" prop=\"duration\"></el-table-column>\r\n        <!-- 操作列：导入、播放按钮 -->\r\n        <el-table-column align=\"right\">\r\n            <!-- 表头的导入本地按钮 -->\r\n            <template slot=\"header\" slot-scope=\"scope\">\r\n                <el-button type=\"primary\" @click=\"upload\" style=\"width: 200px;\">导入本地</el-button>\r\n                <!-- 上传TXT文件按钮 -->\r\n                <el-button type=\"success\" @click=\"selectTxtFile\" style=\"width: 200px;\">上传文本文件</el-button>\r\n                <el-button type=\"danger\" @click=\"downloadMp3\" style=\"width: 200px;\">下载 MP3 文件</el-button>\r\n            </template>\r\n            <!-- 每一行的播放按钮 -->\r\n            <template slot-scope=\"scope\">\r\n                <el-button size=\"mini\" icon=\"el-icon-video-play\" @click=\"play(scope.$index, scope.row)\"></el-button>\r\n            </template>\r\n        </el-table-column>\r\n    </el-table>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { uploadFiles } from '../utils'\r\nimport { uploadTxtFile } from '../api/musicApi.js'\r\nexport default {\r\n    computed: {\r\n        ...mapGetters(['index', 'localSongs', 'playingSongs', 'playedSongs']),\r\n        songs() {\r\n            switch (this.$route.path) {\r\n                case '/playingmusic':\r\n                    return this.playingSongs\r\n                case '/playedmusic':\r\n                    return this.playedSongs\r\n                default:\r\n                    return this.localSongs\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['handlePlay', 'handleClickSong', 'handleUpload']),\r\n        play(_, row) {\r\n            console.log({ index: this.index, audio: row.audio, name: row.name })\r\n            this.handleClickSong({ index: this.index, audio: row.audio, name: row.name })\r\n        },\r\n        async upload() {\r\n            this.$message('加载中，请等候...')\r\n            this.handleUpload(await uploadFiles())\r\n        },\r\n        selectTxtFile() {\r\n            // 触发input的点击事件\r\n            const input = document.createElement('input')\r\n            input.type = 'file'\r\n            input.accept = '.txt'\r\n            input.onchange = this.handleTxtFileChange\r\n            input.click()\r\n        },\r\n        // 处理TXT文件上传\r\n        async handleTxtFileChange(event) {\r\n            const file = event.target.files[0]\r\n            if (file && file.type === 'text/plain') {\r\n                try {\r\n                    this.$message('上传中...')\r\n                    const response = await uploadTxtFile(file)\r\n                    console.log('上传成功', response)\r\n                    this.$message.success('TXT文件上传成功！')\r\n                } catch (error) {\r\n                    this.$message.error('上传失败')\r\n                    console.error('上传失败', error)\r\n                }\r\n            } else {\r\n                this.$message.error('请上传TXT文件')\r\n            }\r\n        },\r\n\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.my-main {\r\n    width: 100%;\r\n}\r\n</style>"],"mappings":"AAqBA,SAAAA,UAAA,EAAAC,UAAA;AACA,SAAAC,WAAA;AACA,SAAAC,aAAA;AACA;EACAC,QAAA;IACA,GAAAJ,UAAA;IACAK,MAAA;MACA,aAAAC,MAAA,CAAAC,IAAA;QACA;UACA,YAAAC,YAAA;QACA;UACA,YAAAC,WAAA;QACA;UACA,YAAAC,UAAA;MACA;IACA;EACA;EACAC,OAAA;IACA,GAAAV,UAAA;IACAW,KAAAC,CAAA,EAAAC,GAAA;MACAC,OAAA,CAAAC,GAAA;QAAAC,KAAA,OAAAA,KAAA;QAAAC,KAAA,EAAAJ,GAAA,CAAAI,KAAA;QAAAC,IAAA,EAAAL,GAAA,CAAAK;MAAA;MACA,KAAAC,eAAA;QAAAH,KAAA,OAAAA,KAAA;QAAAC,KAAA,EAAAJ,GAAA,CAAAI,KAAA;QAAAC,IAAA,EAAAL,GAAA,CAAAK;MAAA;IACA;IACA,MAAAE,OAAA;MACA,KAAAC,QAAA;MACA,KAAAC,YAAA,OAAArB,WAAA;IACA;IACAsB,cAAA;MACA;MACA,MAAAC,KAAA,GAAAC,QAAA,CAAAC,aAAA;MACAF,KAAA,CAAAG,IAAA;MACAH,KAAA,CAAAI,MAAA;MACAJ,KAAA,CAAAK,QAAA,QAAAC,mBAAA;MACAN,KAAA,CAAAO,KAAA;IACA;IACA;IACA,MAAAD,oBAAAE,KAAA;MACA,MAAAC,IAAA,GAAAD,KAAA,CAAAE,MAAA,CAAAC,KAAA;MACA,IAAAF,IAAA,IAAAA,IAAA,CAAAN,IAAA;QACA;UACA,KAAAN,QAAA;UACA,MAAAe,QAAA,SAAAlC,aAAA,CAAA+B,IAAA;UACAnB,OAAA,CAAAC,GAAA,SAAAqB,QAAA;UACA,KAAAf,QAAA,CAAAgB,OAAA;QACA,SAAAC,KAAA;UACA,KAAAjB,QAAA,CAAAiB,KAAA;UACAxB,OAAA,CAAAwB,KAAA,SAAAA,KAAA;QACA;MACA;QACA,KAAAjB,QAAA,CAAAiB,KAAA;MACA;IACA;EAEA;AACA","ignoreList":[]}]}