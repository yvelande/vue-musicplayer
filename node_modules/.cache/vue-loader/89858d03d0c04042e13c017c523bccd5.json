{"remainingRequest":"/home/huyu0408/FM/vue-musicplayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/huyu0408/FM/vue-musicplayer/src/views/MyMain.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/huyu0408/FM/vue-musicplayer/src/views/MyMain.vue","mtime":1735301836997},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js","mtime":1734925316076},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/babel-loader/lib/index.js","mtime":1734925316099},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js","mtime":1734925316076},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/vue-loader/lib/index.js","mtime":1734925323578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcNCmltcG9ydCB7IHVwbG9hZEZpbGVzIH0gZnJvbSAnLi4vdXRpbHMnDQppbXBvcnQgeyB1cGxvYWRUeHRGaWxlIH0gZnJvbSAnLi4vYXBpL211c2ljQXBpLmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIC4uLm1hcEdldHRlcnMoWydpbmRleCcsICdsb2NhbFNvbmdzJywgJ3BsYXlpbmdTb25ncycsICdwbGF5ZWRTb25ncyddKSwNCiAgICAgICAgc29uZ3MoKSB7DQogICAgICAgICAgICBzd2l0Y2ggKHRoaXMuJHJvdXRlLnBhdGgpIHsNCiAgICAgICAgICAgICAgICBjYXNlICcvcGxheWluZ211c2ljJzoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxheWluZ1NvbmdzDQogICAgICAgICAgICAgICAgY2FzZSAnL3BsYXllZG11c2ljJzoNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGxheWVkU29uZ3MNCiAgICAgICAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFNvbmdzDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLi4ubWFwQWN0aW9ucyhbJ2hhbmRsZVBsYXknLCAnaGFuZGxlQ2xpY2tTb25nJywgJ2hhbmRsZVVwbG9hZCddKSwNCiAgICAgICAgcGxheShfLCByb3cpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHsgaW5kZXg6IHRoaXMuaW5kZXgsIGF1ZGlvOiByb3cuYXVkaW8sIG5hbWU6IHJvdy5uYW1lIH0pDQogICAgICAgICAgICB0aGlzLmhhbmRsZUNsaWNrU29uZyh7IGluZGV4OiB0aGlzLmluZGV4LCBhdWRpbzogcm93LmF1ZGlvLCBuYW1lOiByb3cubmFtZSB9KQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyB1cGxvYWQoKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCfliqDovb3kuK3vvIzor7fnrYnlgJkuLi4nKQ0KICAgICAgICAgICAgdGhpcy5oYW5kbGVVcGxvYWQoYXdhaXQgdXBsb2FkRmlsZXMoKSkNCiAgICAgICAgfSwNCiAgICAgICAgc2VsZWN0VHh0RmlsZSgpIHsNCiAgICAgICAgICAgIC8vIOinpuWPkWlucHV055qE54K55Ye75LqL5Lu2DQogICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykNCiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAnZmlsZScNCiAgICAgICAgICAgIGlucHV0LmFjY2VwdCA9ICcudHh0Jw0KICAgICAgICAgICAgaW5wdXQub25jaGFuZ2UgPSB0aGlzLmhhbmRsZVR4dEZpbGVDaGFuZ2UNCiAgICAgICAgICAgIGlucHV0LmNsaWNrKCkNCiAgICAgICAgfSwNCiAgICAgICAgLy8g5aSE55CGVFhU5paH5Lu25LiK5LygDQogICAgICAgIGFzeW5jIGhhbmRsZVR4dEZpbGVDaGFuZ2UoZXZlbnQpIHsNCiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF0NCiAgICAgICAgICAgIGlmIChmaWxlICYmIGZpbGUudHlwZSA9PT0gJ3RleHQvcGxhaW4nKSB7DQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgn5LiK5Lyg5LitLi4uJykNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1cGxvYWRUeHRGaWxlKGZpbGUpDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDmiJDlip8nLCByZXNwb25zZSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCdUWFTmlofku7bkuIrkvKDmiJDlip/vvIEnKQ0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWksei0pScpDQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+S4iuS8oOWksei0pScsIGVycm9yKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+35LiK5LygVFhU5paH5Lu2JykNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCg0KICAgIH0NCn0NCg=="},{"version":3,"sources":["MyMain.vue"],"names":[],"mappings":";AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"MyMain.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <el-table :data=\"songs\" height=\"70vh\" style=\"width: 100%\">\r\n        <el-table-column label=\"名称\" prop=\"name\"></el-table-column>\r\n        <el-table-column label=\"时长\" prop=\"duration\"></el-table-column>\r\n        <!-- 操作列：导入、播放按钮 -->\r\n        <el-table-column align=\"right\">\r\n            <!-- 表头的导入本地按钮 -->\r\n            <template slot=\"header\" slot-scope=\"scope\">\r\n                <el-button type=\"primary\" @click=\"upload\" style=\"width: 200px;\">导入本地</el-button>\r\n                <!-- 上传TXT文件按钮 -->\r\n                <el-button type=\"success\" @click=\"selectTxtFile\" style=\"width: 200px;\">上传文本文件</el-button>\r\n                <el-button type=\"danger\" @click=\"downloadMp3\" style=\"width: 200px;\">下载 MP3 文件</el-button>\r\n            </template>\r\n            <!-- 每一行的播放按钮 -->\r\n            <template slot-scope=\"scope\">\r\n                <el-button size=\"mini\" icon=\"el-icon-video-play\" @click=\"play(scope.$index, scope.row)\"></el-button>\r\n            </template>\r\n        </el-table-column>\r\n    </el-table>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { uploadFiles } from '../utils'\r\nimport { uploadTxtFile } from '../api/musicApi.js'\r\nexport default {\r\n    computed: {\r\n        ...mapGetters(['index', 'localSongs', 'playingSongs', 'playedSongs']),\r\n        songs() {\r\n            switch (this.$route.path) {\r\n                case '/playingmusic':\r\n                    return this.playingSongs\r\n                case '/playedmusic':\r\n                    return this.playedSongs\r\n                default:\r\n                    return this.localSongs\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['handlePlay', 'handleClickSong', 'handleUpload']),\r\n        play(_, row) {\r\n            console.log({ index: this.index, audio: row.audio, name: row.name })\r\n            this.handleClickSong({ index: this.index, audio: row.audio, name: row.name })\r\n        },\r\n        async upload() {\r\n            this.$message('加载中，请等候...')\r\n            this.handleUpload(await uploadFiles())\r\n        },\r\n        selectTxtFile() {\r\n            // 触发input的点击事件\r\n            const input = document.createElement('input')\r\n            input.type = 'file'\r\n            input.accept = '.txt'\r\n            input.onchange = this.handleTxtFileChange\r\n            input.click()\r\n        },\r\n        // 处理TXT文件上传\r\n        async handleTxtFileChange(event) {\r\n            const file = event.target.files[0]\r\n            if (file && file.type === 'text/plain') {\r\n                try {\r\n                    this.$message('上传中...')\r\n                    const response = await uploadTxtFile(file)\r\n                    console.log('上传成功', response)\r\n                    this.$message.success('TXT文件上传成功！')\r\n                } catch (error) {\r\n                    this.$message.error('上传失败')\r\n                    console.error('上传失败', error)\r\n                }\r\n            } else {\r\n                this.$message.error('请上传TXT文件')\r\n            }\r\n        },\r\n\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.my-main {\r\n    width: 100%;\r\n}\r\n</style>"]}]}