{"remainingRequest":"/home/huyu0408/FM/vue-musicplayer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/huyu0408/FM/vue-musicplayer/src/views/MyMain.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/huyu0408/FM/vue-musicplayer/src/views/MyMain.vue","mtime":1735395937483},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js","mtime":1734925316076},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/babel-loader/lib/index.js","mtime":1734925316099},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/cache-loader/dist/cjs.js","mtime":1734925316076},{"path":"/home/huyu0408/FM/vue-musicplayer/node_modules/vue-loader/lib/index.js","mtime":1734925323578}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCcNCmltcG9ydCB7IHVwbG9hZEZpbGVzIH0gZnJvbSAnLi4vdXRpbHMnDQppbXBvcnQgeyB1cGxvYWRUeHRGaWxlLCBkb3dubG9hZE1wM0ZpbGUgfSBmcm9tICcuLi9hcGkvbXVzaWNBcGkuanMnDQpleHBvcnQgZGVmYXVsdCB7DQogICAgY29tcHV0ZWQ6IHsNCiAgICAgICAgLi4ubWFwR2V0dGVycyhbJ2luZGV4JywgJ2xvY2FsU29uZ3MnLCAncGxheWluZ1NvbmdzJywgJ3BsYXllZFNvbmdzJ10pLA0KICAgICAgICBzb25ncygpIHsNCiAgICAgICAgICAgIHN3aXRjaCAodGhpcy4kcm91dGUucGF0aCkgew0KICAgICAgICAgICAgICAgIGNhc2UgJy9wbGF5aW5nbXVzaWMnOg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5aW5nU29uZ3MNCiAgICAgICAgICAgICAgICBjYXNlICcvcGxheWVkbXVzaWMnOg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZWRTb25ncw0KICAgICAgICAgICAgICAgIGRlZmF1bHQ6DQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsU29uZ3MNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICAuLi5tYXBBY3Rpb25zKFsnaGFuZGxlUGxheScsICdoYW5kbGVDbGlja1NvbmcnLCAnaGFuZGxlVXBsb2FkJ10pLA0KICAgICAgICBwbGF5KF8sIHJvdykgew0KICAgICAgICAgICAgY29uc29sZS5sb2coeyBpbmRleDogdGhpcy5pbmRleCwgYXVkaW86IHJvdy5hdWRpbywgbmFtZTogcm93Lm5hbWUgfSkNCiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xpY2tTb25nKHsgaW5kZXg6IHRoaXMuaW5kZXgsIGF1ZGlvOiByb3cuYXVkaW8sIG5hbWU6IHJvdy5uYW1lIH0pDQogICAgICAgIH0sDQogICAgICAgIGFzeW5jIHVwbG9hZCgpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+WKoOi9veS4re+8jOivt+etieWAmS4uLicpDQogICAgICAgICAgICB0aGlzLmhhbmRsZVVwbG9hZChhd2FpdCB1cGxvYWRGaWxlcygpKQ0KICAgICAgICB9LA0KICAgICAgICBzZWxlY3RUeHRGaWxlKCkgew0KICAgICAgICAgICAgLy8g6Kem5Y+RaW5wdXTnmoTngrnlh7vkuovku7YNCiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKQ0KICAgICAgICAgICAgaW5wdXQudHlwZSA9ICdmaWxlJw0KICAgICAgICAgICAgaW5wdXQuYWNjZXB0ID0gJy50eHQnDQogICAgICAgICAgICBpbnB1dC5vbmNoYW5nZSA9IHRoaXMuaGFuZGxlVHh0RmlsZUNoYW5nZQ0KICAgICAgICAgICAgaW5wdXQuY2xpY2soKQ0KICAgICAgICB9LA0KICAgICAgICBhc3luYyBoYW5kbGVUeHRGaWxlQ2hhbmdlKGV2ZW50KSB7DQogICAgICAgICAgICBjb25zdCBmaWxlID0gZXZlbnQudGFyZ2V0LmZpbGVzWzBdDQogICAgICAgICAgICBpZiAoZmlsZSAmJiBmaWxlLnR5cGUgPT09ICd0ZXh0L3BsYWluJykgew0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+S4iuS8oOS4rS4uLicpDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdXBsb2FkVHh0RmlsZShmaWxlKQ0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5LiK5Lyg5oiQ5YqfJywgcmVzcG9uc2UpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnVFhU5paH5Lu25LiK5Lyg5oiQ5Yqf77yBJykNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfkuIrkvKDlpLHotKUnLCBlcnJvcikNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihg5LiK5Lyg5aSx6LSl77yaJHtlcnJvci5tZXNzYWdlIHx8IGVycm9yfWApDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fkuIrkvKBUWFTmlofku7YnKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvLyDosIPnlKggQVBJIOS4reeahCBkb3dubG9hZE1wM0ZpbGUg5pa55rOVDQogICAgICAgIGFzeW5jIGRvd25sb2FkTXAzKCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgZG93bmxvYWRNcDNGaWxlKCk7IC8vIOiwg+eUqCBBUEkg5pa55rOVDQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKG1lc3NhZ2UpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycm9yLm1lc3NhZ2UgfHwgJ+S4i+i9veWksei0pScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KDQogICAgfQ0KfQ0K"},{"version":3,"sources":["MyMain.vue"],"names":[],"mappings":";AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"MyMain.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <el-table :data=\"songs\" height=\"70vh\" style=\"width: 100%\">\r\n        <el-table-column label=\"名称\" prop=\"name\"></el-table-column>\r\n        <el-table-column label=\"时长\" prop=\"duration\"></el-table-column>\r\n        <!-- 操作列：导入、播放按钮 -->\r\n        <el-table-column align=\"right\">\r\n            <!-- 表头的导入本地按钮 -->\r\n            <template slot=\"header\" slot-scope=\"scope\">\r\n                <el-button type=\"primary\" @click=\"upload\" style=\"width: 200px;\">导入本地</el-button>\r\n                <!-- 上传TXT文件按钮 -->\r\n                <el-button type=\"success\" @click=\"selectTxtFile\" style=\"width: 200px;\">上传文本文件</el-button>\r\n                <el-button type=\"danger\" @click=\"downloadMp3\" style=\"width: 200px;\">下载 MP3 文件</el-button>\r\n            </template>\r\n            <!-- 每一行的播放按钮 -->\r\n            <template slot-scope=\"scope\">\r\n                <el-button size=\"mini\" icon=\"el-icon-video-play\" @click=\"play(scope.$index, scope.row)\"></el-button>\r\n            </template>\r\n        </el-table-column>\r\n    </el-table>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport { uploadFiles } from '../utils'\r\nimport { uploadTxtFile, downloadMp3File } from '../api/musicApi.js'\r\nexport default {\r\n    computed: {\r\n        ...mapGetters(['index', 'localSongs', 'playingSongs', 'playedSongs']),\r\n        songs() {\r\n            switch (this.$route.path) {\r\n                case '/playingmusic':\r\n                    return this.playingSongs\r\n                case '/playedmusic':\r\n                    return this.playedSongs\r\n                default:\r\n                    return this.localSongs\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        ...mapActions(['handlePlay', 'handleClickSong', 'handleUpload']),\r\n        play(_, row) {\r\n            console.log({ index: this.index, audio: row.audio, name: row.name })\r\n            this.handleClickSong({ index: this.index, audio: row.audio, name: row.name })\r\n        },\r\n        async upload() {\r\n            this.$message('加载中，请等候...')\r\n            this.handleUpload(await uploadFiles())\r\n        },\r\n        selectTxtFile() {\r\n            // 触发input的点击事件\r\n            const input = document.createElement('input')\r\n            input.type = 'file'\r\n            input.accept = '.txt'\r\n            input.onchange = this.handleTxtFileChange\r\n            input.click()\r\n        },\r\n        async handleTxtFileChange(event) {\r\n            const file = event.target.files[0]\r\n            if (file && file.type === 'text/plain') {\r\n                try {\r\n                    this.$message('上传中...')\r\n                    const response = await uploadTxtFile(file)\r\n                    console.log('上传成功', response)\r\n                    this.$message.success('TXT文件上传成功！')\r\n                } catch (error) {\r\n                    console.error('上传失败', error)\r\n                    this.$message.error(`上传失败：${error.message || error}`)\r\n                }\r\n            } else {\r\n                this.$message.error('请上传TXT文件')\r\n            }\r\n        },\r\n        // 调用 API 中的 downloadMp3File 方法\r\n        async downloadMp3() {\r\n            try {\r\n                const message = await downloadMp3File(); // 调用 API 方法\r\n                this.$message.success(message);\r\n            } catch (error) {\r\n                this.$message.error(error.message || '下载失败');\r\n            }\r\n        },\r\n\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.my-main {\r\n    width: 100%;\r\n}\r\n</style>"]}]}